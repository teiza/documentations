# Запуск приложения. Класс Program

- точка входа в приложение
- отвечает за регистрацию Startup.cs
- IISIntegration
- создание хоста

# Класс Startup

- производит конфигурацию приложения
- настраивает сервисы
- устанавливает middleware

## Методы

Срабатывают в порядке определенном ниже.

- конструктор
    1) необязательный
    2) начальная конфигурация приложения

- ConfigureServices()
    1) необязательный
    2) регистрирует сервисы
    3) в качестве параметра IServiceCollection 

- Configure()
    1) обязательный
    2) устанавливает middleware
    3) в качестве параметра IApplicationBuilder

# Конвейер обработки запроса и middleware

- обработка запроса по принципу конвейера

Сначала данные запроса получает первый middleware в конвейере. После обработки он передает данные другому middleware и так далее.

Middleware может, либо передать следующему middleware на обработку запрос, либо закончить работу конвейера.

Также middleware может обрабатывать запрос как до, так и после следующего middleware.

Middleware конфигурируются с помощью методов расширений Run, Map, Use.

## Жизненный цикл middleware

Метод Configure() выполняется один раз при создании класса Startup, и middleware создаются один раз и живут в течение всего жизненного цикла приложения.

# Методы Use, Run и делегат RequestDelegate

## Run

- middleware определенные через Run, не вызывают никакие другие middleware
- параметр delegate Task RequestDelegate(HttpContext)

## Use

- в отличие от Run, можно вызвать следующий middleware в конвейере
- параметр (HttpContext, делегат с ссылкой на следующий middleware)

# Методы Map и MapWhen

## Map

- для сопоставления пути запроса с определенным делегатом, который вызывается по этому пути
- могут быть вложенные методы Map (Map в Map)

## MapWhen

- принимает в качестве параметра делегат, и обрабатывает запрос, если функция, передаваемая в качестве параметра возвращает true

# Создание компонентов middleware

- создать класс
- создать конструктор, который принимает RequestDelegate
- определить метод Invoke() или InvokeAsync(). Метод должен возвращать Task и принимать в качестве параметра HttpContext

# Конвейер обработки запроса

- порядок middleware играет роль
- middleware (напомнить) может обрабатывать запрос как до, так и после следующего middleware

# IWebHostEnvironment и окружение
# Статические файлы
# Работа со статическими файлами
# Обработка ошибок
# Работа с HTTPS
