# **`Введение в привязку моделей`**

- привязка модели - механизм сопоставления данных с представления в контроллер
- все привязчики должны реализовать интерфейс IModelBuilder

После сопоставления запроса с некоторым маршрутом контролллеров вызываются специальные компоненты - **активаторы действий (action invoker)**, которые вызывают нужное действие контроллера и передают в него значения из контекста запроса. А чтобы сопоставить полученные значения с конкретными параметрами **активаторы действий**, в частности, активатор по умолчанию - **ControllerActionInvoker**, используют **привязчики модели (model binder)**. Привязчики моделей и осуществляют собственно привязку. Затем привязчик использует специальные компоненты - **поставщики значений (value provider)** для поиска значений в различных частях запроса. Поставщики значений предоставляют доступ к информации, которая затем используется в привязке модели. Поставщики значений поставляются фабриками поставщиков значений (value provider factories) и системой поиска данных для этих поставщиков значений в том порядке, в котором они зарегистрированы (регистрация по принципу очереди - вверху первый, внизу последний).

# **`DefaultModelBinder`**

- просматривает следующие объекты строго по порядку:
    1. Request.Form
    2. RoutedData.Values
    3. Request.QueryString
    4. Request.Files

Если в одном из этих объектов будет обнаружен соответствующий элемент, то на нем поиск прекращается, а параметру передается найденное значение

Чтобы DefaultModelBinder мог связать значение с параметром, элемент данных запроса должен обязательно иметь то же имя, что и параметр.

При привязке простых типов DefaultModelBinder преобразует строковое выражение параметра из данных запроса к типу параметра с помощью класса System.ComponentModel.TypeDescriptor. Если же значение нельзя преобразовать, то привязка оканчивается неудачей. Поэтому есть смысл использовать параметры, допускающие значение null

## **Выборочная привязка**

- возможность исключить некоторые свойства из привязки модели. Мы можем это сделать с помощью атрибута Bind.
- Create([Bind (Include="Name, Author")] Book b)
- Create([Bind (Exclude="Name, Author")] Book b)